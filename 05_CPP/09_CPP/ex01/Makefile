NAME 		= RPN
TITLE 		= "üî• [CPP_09] [EX01] Array üí´"
SRC 		= main.cpp \
				RPN.cpp
OBJ 		= $(SRC:.cpp=.o)

CXX 		= c++
CXXFLAGS 	= -Wall -Wextra -Werror -std=c++98 -g

VALGRIND_FLAGS = --leak-check=full --show-leak-kinds=all --track-origins=yes --quiet

DEF_COLOR 	= \033[0m
BROWN   	= \033[33;1m
MAGENTA 	= \033[35;1m
YELLOW  	= \033[33;1m
GREEN   	= \033[32;1m
RED     	= \033[31;1m
CYAN    	= \033[36;1m
BOLD    	= \033[1m

all: $(NAME)

$(NAME): $(OBJ)
	@echo "$(GREEN)Compiling $(TITLE)...$(DEF_COLOR) üõ†Ô∏è"
	@$(CXX) $(CXXFLAGS) -o $(NAME) $(OBJ)
	@echo "$(GREEN)$(NAME) is ready!$(DEF_COLOR) ‚úÖ"

%.o: %.cpp
	@echo "$(YELLOW)Generating object file $@...$(DEF_COLOR)"
	@$(CXX) $(CXXFLAGS) -c $< -o $@

clean:
	@echo "$(MAGENTA)Cleaning object files...$(DEF_COLOR) üßπ"
	@rm -f $(OBJ)

fclean: clean
	@echo "$(RED)Cleaning executable $(NAME)...$(DEF_COLOR) üßπ"
	@rm -f $(NAME)

re: fclean all

valgrind: all
	@echo "$(CYAN)Analyzing $(NAME) with Valgrind...$(DEF_COLOR) üïµÔ∏è‚Äç‚ôÄÔ∏è"
	@valgrind $(VALGRIND_FLAGS) ./$(NAME)

run: all
	@echo "$(BROWN)Running $(NAME)...$(DEF_COLOR) ‚ñ∂Ô∏è"
	@./$(NAME)

.PHONY: all clean fclean re run valgrind
